{"ast":null,"code":"import React,{useState,useEffect}from'react';import clientService from'../../services/clientService';import'./ClientList.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ClientList=_ref=>{let{onClientSelect,onCreateClient}=_ref;const[clients,setClients]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[error,setError]=useState(null);useEffect(()=>{fetchClients();},[]);const fetchClients=async()=>{try{setLoading(true);const data=await clientService.getClients();setClients(data);setError(null);}catch(err){setError('Error fetching clients. Please try again later.');console.error('Error fetching clients:',err);}finally{setLoading(false);}};const handleDeleteClient=async clientId=>{if(window.confirm('Are you sure you want to delete this client?')){try{await clientService.deleteClient(clientId);setClients(clients.filter(client=>client._id!==clientId));}catch(err){setError('Error deleting client. Please try again.');console.error('Error deleting client:',err);}}};// Filter clients based on search term\nconst filteredClients=clients.filter(client=>client.name.toLowerCase().includes(searchTerm.toLowerCase())||client.email.toLowerCase().includes(searchTerm.toLowerCase())||client.phone.includes(searchTerm)||client.panNumber&&client.panNumber.toLowerCase().includes(searchTerm.toLowerCase())||client.gstNumber&&client.gstNumber.toLowerCase().includes(searchTerm.toLowerCase()));return/*#__PURE__*/_jsxs(\"div\",{className:\"client-list-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"client-list-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Clients\"}),/*#__PURE__*/_jsx(\"button\",{className:\"create-client-button\",onClick:onCreateClient,children:\"Add New Client\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"client-search\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search clients by name, email, phone, PAN, or GST...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:\"Loading clients...\"}):/*#__PURE__*/_jsx(_Fragment,{children:filteredClients.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-clients-message\",children:searchTerm?'No clients found matching your search.':'No clients found. Click \"Add New Client\" to create one.'}):/*#__PURE__*/_jsx(\"div\",{className:\"client-grid\",children:filteredClients.map(client=>/*#__PURE__*/_jsxs(\"div\",{className:\"client-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"client-name\",children:client.name}),/*#__PURE__*/_jsx(\"div\",{className:\"client-type\",children:client.clientType}),/*#__PURE__*/_jsxs(\"div\",{className:\"client-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"client-detail\",children:[\"\\uD83D\\uDCE7 \",client.email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"client-detail\",children:[\"\\uD83D\\uDCDE \",client.phone]}),client.panNumber&&/*#__PURE__*/_jsxs(\"div\",{className:\"client-detail\",children:[\"\\uD83E\\uDEAA PAN: \",client.panNumber]}),client.gstNumber&&/*#__PURE__*/_jsxs(\"div\",{className:\"client-detail\",children:[\"\\uD83D\\uDCDD GST: \",client.gstNumber]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"client-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-button view-button\",onClick:()=>onClientSelect(client),children:\"View Details\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button delete-button\",onClick:()=>handleDeleteClient(client._id),children:\"Delete\"})]})]},client._id))})})]});};export default ClientList;","map":{"version":3,"names":["React","useState","useEffect","clientService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ClientList","_ref","onClientSelect","onCreateClient","clients","setClients","loading","setLoading","searchTerm","setSearchTerm","error","setError","fetchClients","data","getClients","err","console","handleDeleteClient","clientId","window","confirm","deleteClient","filter","client","_id","filteredClients","name","toLowerCase","includes","email","phone","panNumber","gstNumber","className","children","onClick","type","placeholder","value","onChange","e","target","length","map","clientType"],"sources":["/Users/klickburn/Projects/client-db/ca-client-management/frontend/src/components/Client/ClientList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport clientService from '../../services/clientService';\nimport './ClientList.css';\n\nconst ClientList = ({ onClientSelect, onCreateClient }) => {\n    const [clients, setClients] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        fetchClients();\n    }, []);\n\n    const fetchClients = async () => {\n        try {\n            setLoading(true);\n            const data = await clientService.getClients();\n            setClients(data);\n            setError(null);\n        } catch (err) {\n            setError('Error fetching clients. Please try again later.');\n            console.error('Error fetching clients:', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleDeleteClient = async (clientId) => {\n        if (window.confirm('Are you sure you want to delete this client?')) {\n            try {\n                await clientService.deleteClient(clientId);\n                setClients(clients.filter(client => client._id !== clientId));\n            } catch (err) {\n                setError('Error deleting client. Please try again.');\n                console.error('Error deleting client:', err);\n            }\n        }\n    };\n\n    // Filter clients based on search term\n    const filteredClients = clients.filter(client => \n        client.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        client.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        client.phone.includes(searchTerm) ||\n        (client.panNumber && client.panNumber.toLowerCase().includes(searchTerm.toLowerCase())) ||\n        (client.gstNumber && client.gstNumber.toLowerCase().includes(searchTerm.toLowerCase()))\n    );\n\n    return (\n        <div className=\"client-list-container\">\n            <div className=\"client-list-header\">\n                <h2>Clients</h2>\n                <button \n                    className=\"create-client-button\"\n                    onClick={onCreateClient}\n                >\n                    Add New Client\n                </button>\n            </div>\n\n            <div className=\"client-search\">\n                <input \n                    type=\"text\"\n                    placeholder=\"Search clients by name, email, phone, PAN, or GST...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                />\n            </div>\n\n            {error && <div className=\"error-message\">{error}</div>}\n            \n            {loading ? (\n                <div className=\"loading-spinner\">Loading clients...</div>\n            ) : (\n                <>\n                    {filteredClients.length === 0 ? (\n                        <p className=\"no-clients-message\">\n                            {searchTerm \n                                ? 'No clients found matching your search.' \n                                : 'No clients found. Click \"Add New Client\" to create one.'}\n                        </p>\n                    ) : (\n                        <div className=\"client-grid\">\n                            {filteredClients.map(client => (\n                                <div key={client._id} className=\"client-card\">\n                                    <div className=\"client-name\">{client.name}</div>\n                                    <div className=\"client-type\">{client.clientType}</div>\n                                    <div className=\"client-details\">\n                                        <div className=\"client-detail\">📧 {client.email}</div>\n                                        <div className=\"client-detail\">📞 {client.phone}</div>\n                                        {client.panNumber && (\n                                            <div className=\"client-detail\">🪪 PAN: {client.panNumber}</div>\n                                        )}\n                                        {client.gstNumber && (\n                                            <div className=\"client-detail\">📝 GST: {client.gstNumber}</div>\n                                        )}\n                                    </div>\n                                    <div className=\"client-actions\">\n                                        <button \n                                            className=\"action-button view-button\"\n                                            onClick={() => onClientSelect(client)}\n                                        >\n                                            View Details\n                                        </button>\n                                        <button \n                                            className=\"action-button delete-button\"\n                                            onClick={() => handleDeleteClient(client._id)}\n                                        >\n                                            Delete\n                                        </button>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default ClientList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}