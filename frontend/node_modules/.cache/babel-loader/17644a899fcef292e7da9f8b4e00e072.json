{"ast":null,"code":"import React,{useState,useContext}from'react';import{useHistory}from'react-router-dom';import{AuthContext}from'../../context/AuthContext';import'./Login.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const history=useHistory();const{login}=useContext(AuthContext);const handleLogin=async e=>{e.preventDefault();setError('');setLoading(true);try{// Use the login function from AuthContext\nconst userData=await login(username,password);// Redirect based on user role\nif(userData&&userData.role){history.push(userData.role==='admin'?'/admin':'/user');}else{throw new Error('Invalid user data returned');}}catch(error){setError('Invalid username or password');console.error('Login error:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-logo\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"CA Client Manager\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage your CA firm clients efficiently\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:e=>setUsername(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",disabled:loading,children:loading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login-footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2025 CA Client Management System\"})})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useContext","useHistory","AuthContext","jsx","_jsx","jsxs","_jsxs","Login","username","setUsername","password","setPassword","error","setError","loading","setLoading","history","login","handleLogin","e","preventDefault","userData","role","push","Error","console","className","children","onSubmit","htmlFor","type","id","value","onChange","target","required","disabled"],"sources":["/Users/klickburn/Projects/client-db/ca-client-management/frontend/src/components/Auth/Login.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { AuthContext } from '../../context/AuthContext';\nimport './Login.css';\n\nconst Login = () => {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n    const [loading, setLoading] = useState(false);\n    const history = useHistory();\n    const { login } = useContext(AuthContext);\n\n    const handleLogin = async (e) => {\n        e.preventDefault();\n        setError('');\n        setLoading(true);\n\n        try {\n            // Use the login function from AuthContext\n            const userData = await login(username, password);\n            \n            // Redirect based on user role\n            if (userData && userData.role) {\n                history.push(userData.role === 'admin' ? '/admin' : '/user');\n            } else {\n                throw new Error('Invalid user data returned');\n            }\n        } catch (error) {\n            setError('Invalid username or password');\n            console.error('Login error:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"login-page\">\n            <div className=\"login-container\">\n                <div className=\"login-logo\">\n                    <h1>CA Client Manager</h1>\n                    <p>Manage your CA firm clients efficiently</p>\n                </div>\n                <div className=\"login-form-container\">\n                    <h2>Login</h2>\n                    {error && <p className=\"error-message\">{error}</p>}\n                    <form onSubmit={handleLogin} className=\"login-form\">\n                        <div className=\"form-group\">\n                            <label htmlFor=\"username\">Username</label>\n                            <input\n                                type=\"text\"\n                                id=\"username\"\n                                value={username}\n                                onChange={(e) => setUsername(e.target.value)}\n                                required\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"password\">Password</label>\n                            <input\n                                type=\"password\"\n                                id=\"password\"\n                                value={password}\n                                onChange={(e) => setPassword(e.target.value)}\n                                required\n                            />\n                        </div>\n                        <button \n                            type=\"submit\" \n                            className=\"login-button\"\n                            disabled={loading}\n                        >\n                            {loading ? 'Logging in...' : 'Login'}\n                        </button>\n                    </form>\n                    <div className=\"login-footer\">\n                        <p>Â© 2025 CA Client Management System</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Login;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CACnD,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,OAASC,WAAW,KAAQ,2BAA2B,CACvD,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErB,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAChB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAiB,OAAO,CAAGf,UAAU,CAAC,CAAC,CAC5B,KAAM,CAAEgB,KAAM,CAAC,CAAGjB,UAAU,CAACE,WAAW,CAAC,CAEzC,KAAM,CAAAgB,WAAW,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC7BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBP,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACA;AACA,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAAJ,KAAK,CAACT,QAAQ,CAAEE,QAAQ,CAAC,CAEhD;AACA,GAAIW,QAAQ,EAAIA,QAAQ,CAACC,IAAI,CAAE,CAC3BN,OAAO,CAACO,IAAI,CAACF,QAAQ,CAACC,IAAI,GAAK,OAAO,CAAG,QAAQ,CAAG,OAAO,CAAC,CAChE,CAAC,IAAM,CACH,KAAM,IAAI,CAAAE,KAAK,CAAC,4BAA4B,CAAC,CACjD,CACJ,CAAE,MAAOZ,KAAK,CAAE,CACZC,QAAQ,CAAC,8BAA8B,CAAC,CACxCY,OAAO,CAACb,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACxC,CAAC,OAAS,CACNG,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAED,mBACIX,IAAA,QAAKsB,SAAS,CAAC,YAAY,CAAAC,QAAA,cACvBrB,KAAA,QAAKoB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC5BrB,KAAA,QAAKoB,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBvB,IAAA,OAAAuB,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BvB,IAAA,MAAAuB,QAAA,CAAG,yCAAuC,CAAG,CAAC,EAC7C,CAAC,cACNrB,KAAA,QAAKoB,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACjCvB,IAAA,OAAAuB,QAAA,CAAI,OAAK,CAAI,CAAC,CACbf,KAAK,eAAIR,IAAA,MAAGsB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEf,KAAK,CAAI,CAAC,cAClDN,KAAA,SAAMsB,QAAQ,CAAEV,WAAY,CAACQ,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC/CrB,KAAA,QAAKoB,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBvB,IAAA,UAAOyB,OAAO,CAAC,UAAU,CAAAF,QAAA,CAAC,UAAQ,CAAO,CAAC,cAC1CvB,IAAA,UACI0B,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,UAAU,CACbC,KAAK,CAAExB,QAAS,CAChByB,QAAQ,CAAGd,CAAC,EAAKV,WAAW,CAACU,CAAC,CAACe,MAAM,CAACF,KAAK,CAAE,CAC7CG,QAAQ,MACX,CAAC,EACD,CAAC,cACN7B,KAAA,QAAKoB,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBvB,IAAA,UAAOyB,OAAO,CAAC,UAAU,CAAAF,QAAA,CAAC,UAAQ,CAAO,CAAC,cAC1CvB,IAAA,UACI0B,IAAI,CAAC,UAAU,CACfC,EAAE,CAAC,UAAU,CACbC,KAAK,CAAEtB,QAAS,CAChBuB,QAAQ,CAAGd,CAAC,EAAKR,WAAW,CAACQ,CAAC,CAACe,MAAM,CAACF,KAAK,CAAE,CAC7CG,QAAQ,MACX,CAAC,EACD,CAAC,cACN/B,IAAA,WACI0B,IAAI,CAAC,QAAQ,CACbJ,SAAS,CAAC,cAAc,CACxBU,QAAQ,CAAEtB,OAAQ,CAAAa,QAAA,CAEjBb,OAAO,CAAG,eAAe,CAAG,OAAO,CAChC,CAAC,EACP,CAAC,cACPV,IAAA,QAAKsB,SAAS,CAAC,cAAc,CAAAC,QAAA,cACzBvB,IAAA,MAAAuB,QAAA,CAAG,uCAAkC,CAAG,CAAC,CACxC,CAAC,EACL,CAAC,EACL,CAAC,CACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAApB,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module"}